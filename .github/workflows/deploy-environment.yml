name: Formulaire Manuel avec Inputs

on:
  # Ceci active le bouton "Run workflow" (Exécuter le workflow)
  workflow_dispatch:
    inputs:
      # --- CHAMP TEXTE (STRING) ---
      environment:
        description: 'Environnement Cible'
        required: true
        default: 'staging'
        type: string
      
      # --- CHAMP TEXTE OPTIONNEL (STRING) ---
      commit_message:
        description: 'Message de validation personnalisé'
        required: false
        type: string

      # --- CASE À COCHER (BOOLEAN) ---
      run_tests:
        description: 'Exécuter les tests complets ?'
        required: false
        default: false
        type: boolean
      
      # --- CASE À COCHER (BOOLEAN) ---
      notify_slack:
        description: 'Notifier Slack du déploiement ?'
        required: false
        default: true
        type: boolean

jobs:
  display_inputs:
    runs-on: ubuntu-latest
    
    steps:
      - name: Afficher les strings et les cases cochées
        run: |
          echo "--- Résultat du Formulaire ---"
          
          # Accéder aux valeurs string
          echo "Environnement cible saisi (string): ${{ github.event.inputs.environment }}"
          echo "Message de validation saisi (string): ${{ github.event.inputs.commit_message }}"

          # Accéder aux valeurs checkbox (boolean)
          echo "Option 'Exécuter les tests' cochée (boolean): ${{ github.event.inputs.run_tests }}"
          echo "Option 'Notifier Slack' cochée (boolean): ${{ github.event.inputs.notify_slack }}"
          
          # Exemple de logique conditionnelle basée sur une checkbox
          if [ "${{ github.event.inputs.run_tests }}" == "true" ]; then
            echo "Condition : Les tests vont être exécutés !"
          else
            echo "Condition : Saut des tests rapides."
          fi
